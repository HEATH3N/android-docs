<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Events | Android Documentation</title><meta class="swiftype" name="type" data-type="enum" content="Android Documentation"/><meta class="swiftype" name="title" data-type="string" content="Events | Android Documentation"/><link href="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css" rel="stylesheet"/><script async="" defer="" src="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js"></script><link href="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.min.css" rel="stylesheet"/><script src="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.js"></script><link rel="stylesheet" href="stylesheet.css" type="text/css"/><style>.border--3{border-width:3px!important}.bg-green{background-color:#8cca44!important}.icon-android-green svg{color:#8cca44}.bright-blue-color{color:#0082ff}.bright-blue-color-on-hover:hover{color:#0082ff!important}.border--bright-blue-color{border-color:#273d56}.border--gray-less-faint{border-color:#e8ebee!important}.bright-blue-color-on-hover-anchor a:hover{color:#0082ff}.hmax130 img{max-height:130px}.wmax260{max-width:260px}.text-decoration-none{text-decoration:none!important}.unstyled-list li{list-style-type:none!important}.overflow-y{overflow-y:auto}.t48{top:48px}.b0{bottom:0}.txt-ms{font-size:13px!important;line-height:18px}td,th{text-align:left!important;padding:4px!important;font-size:12px!important}th{background-color:#e8ebee}code,pre,td{font-weight:400!important;font-size:12px!important}.limiter{padding-left:24px;padding-right:24px;width:100%}@media (min-width:1200px){.limiter{padding-left:12.5%!important;padding-right:12.5%!important}}.prose h1,h2,h3,h4,h5,h6{font-weight:400!important}@media (min-width:440px){.note-card{margin-top:-12px;width:240px;margin-left:24px;padding-bottom:0!important}}.note-card{padding-bottom:24px}code{font-weight:400}code,pre{font-family:Fira Mono Medium,Monaco,monospace!important}code,pre{font-size:12px!important;word-break:normal!important}pre{font-weight:700;background-color:#232323!important}.doc-ul>.doc-ul-item:before{content:"";width:8px;height:8px;border-radius:2px;border:1px solid #1f3349;opacity:.4;position:absolute;margin:9px 0 0 -20px}.doc-ol{counter-reset:listItem}.doc-ol>.doc-ol-item{margin:3px 0}ol li{list-style-type:none}ol li:before{counter-increment:listItem;content:counter(listItem);font-size:12px;border-radius:3px;padding:1px 6px;border:1px solid #c6d2e1;margin-right:12px}.hljs{color:#a9b7c6;background:#232323;display:block;overflow-x:auto;padding:.5em}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#56b881}.hljs-comment,.hljs-quote{color:gray}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#56b881}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><div id="react-mount"><div class="grid" data-reactroot="" data-reactid="1" data-react-checksum="-718509875"><div class="z1 h48 flex-parent--center-main flex-parent w-full border-b border-t bg-white border--gray-less-faint fixed" data-reactid="2"><div class="wmax1200 w-full pl24 pr24 flex-parent--space-between-main flex-parent" data-reactid="3"><div class="flex-child col col--6 inline-block" data-reactid="4"><div class="txt-s py12 bg-transparent btn px0 color-gray-light" data-reactid="5"><strong data-reactid="6">Platform</strong></div><div style="display:inline-block;" data-reactid="7"><button class="txt-s py12 border--bright-blue-color bright-blue-color-on-hover bg-transparent btn flex-parent flex-parent--center-cross color-gray-dark" data-reactid="8"><strong data-reactid="9">Android</strong><svg class="icon" data-reactid="10"><use xlink:href="#icon-chevron-down" data-reactid="11"></use></svg></button></div><div class="txt-s py12 bg-transparent btn px0 color-gray-light" data-reactid="12"><strong data-reactid="13">Product</strong></div><div style="display:inline-block;" data-reactid="14"><button class="txt-s py12 border--bright-blue-color bright-blue-color-on-hover bg-transparent btn flex-parent flex-parent--center-cross color-gray-dark" data-reactid="15"><strong data-reactid="16">Map SDK</strong><svg class="icon" data-reactid="17"><use xlink:href="#icon-chevron-down" data-reactid="18"></use></svg></button></div></div><div class="flex-child col col--6 flex-parent flex-parent--end-main" data-reactid="19"><a class="py12 transition mobile-right-nav unround btn color-gray-dark border--bright-blue-color bright-blue-color-on-hover bg-transparent txt-s  border-b border--3" href="/android-docs/map-sdk/overview/" data-reactid="20">Overview</a><a class="py12 transition mobile-right-nav unround btn color-gray-dark border--bright-blue-color bright-blue-color-on-hover bg-transparent txt-s  " href="/android-docs/map-sdk/examples/" data-reactid="21">Examples</a><a class="py12 transition mobile-right-nav unround btn color-gray-dark border--bright-blue-color bright-blue-color-on-hover bg-transparent txt-s  " href="/android-docs/map-sdk/tutorials/" data-reactid="22">Tutorials</a></div></div></div><div class="scroll-styled flex-parent--center-main flex-parent limiter pb96 pl24 pr24 pt24 overflow-y t48 b0 fixed flex-child" data-reactid="23"><div class="flex-parent--space-between-main flex-parent" data-reactid="24"><div class="col col--2 pt42 pr18 pb18 flex-child--no-shrink fixed color-gray-dark unstyled-list scroll-styled" data-reactid="25"><div data-reactid="26"><li class="txt-bold txt-fancy" data-reactid="27"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/" data-reactid="28">Map SDK</a></li><!-- react-text: 29 --><!-- /react-text --></div><div data-reactid="30"><li class="txt-bold txt-fancy" data-reactid="31"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/styling-map/" data-reactid="32">Styling the map</a></li><!-- react-text: 33 --><!-- /react-text --></div><div data-reactid="34"><li class="txt-bold txt-fancy" data-reactid="35"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/annotations/" data-reactid="36">Annotations</a></li><!-- react-text: 37 --><!-- /react-text --></div><div data-reactid="38"><li class="txt-bold txt-fancy" data-reactid="39"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/events/" data-reactid="40"><div class="bright-blue-color" data-reactid="41">Events</div></a></li><div class="ml6 pt6" data-reactid="42"><ul class="txt-s inline-block mb12 bright-blue-color-on-hover-anchor">
<li>
<ul>
<li><a href="#map-click-long-click-events">Map click &amp; long click events</a></li>
<li><a href="#camera-change-events">Camera change events</a></li>
<li><a href="#on-fling-on-scroll-events">On fling &amp; on scroll events</a></li>
<li><a href="#marker-and-info-window-events">Marker and info window events</a></li>
<li><a href="#map-change-events">Map change events</a></li>
</ul>
</li>
</ul>
</div></div><div data-reactid="43"><li class="txt-bold txt-fancy" data-reactid="44"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/offline/" data-reactid="45">Offline</a></li><!-- react-text: 46 --><!-- /react-text --></div><div data-reactid="47"><li class="txt-bold txt-fancy" data-reactid="48"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/query-map/" data-reactid="49">Query Map Features</a></li><!-- react-text: 50 --><!-- /react-text --></div><div data-reactid="51"><li class="txt-bold txt-fancy" data-reactid="52"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/map-sdk/overview/runtime-styling/" data-reactid="53">Runtime Styling</a></li><!-- react-text: 54 --><!-- /react-text --></div><!-- react-text: 55 --><!-- /react-text --><div class="flex-parent wmin180 pb12 flex-parent--column" data-reactid="56"><a href="/android-docs/api/map-sdk/5.1.0/index.html" class="txt-fancy bright-blue-color-on-hover" data-reactid="57">API Reference</a></div><!-- react-text: 58 --><!-- /react-text --></div><div data-reactid="59"><div class="prose color-gray-dark" data-reactid="60"><div class="content col--9 col col--offl3" data-reactid="61"><div class="pt12 doc-ul doc-ol pb96 wmax1200 doc-ol-item" data-reactid="62"><div class="markdown" data-reactid="63"><div data-reactid="64"><h1 id="events"><a class="markdownIt-Anchor" href="#events"></a> Events</h1>
<p>The Map SDK provides various ways to listen to map events. The majority of listeners that the SDK offers are listed below. However, you’ll occasionally find other listeners specific to their corresponding API inside other overview documents.</p>
<h3 id="map-click-long-click-events"><a class="markdownIt-Anchor" href="#map-click-long-click-events"></a> Map click & long click events</h3>
<p>Click (tap) events can be set up through the <code>MapboxMap</code> object and invoke a callback each time that the event occurs. In both cases, the callback provides a <code>LatLng</code> of where the user click occurred on the map. To add an onClick listener to your map, insert the following snippet inside your application’s code:</p>
<pre class="hljs"><code>mapboxMap.setOnMapClickListener(<span class="hljs-keyword">new</span> MapboxMap.OnMapClickListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapClick</span><span class="hljs-params">(@NonNull LatLng point)</span> </span>{
    String string = String.format(Locale.US, <span class="hljs-string">"User clicked at: %s"</span>, point.toString())
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, string, Toast.LENGTH_LONG).show();
  }
});
</code></pre>
<h4 id="convert-from-screen-pixel"><a class="markdownIt-Anchor" href="#convert-from-screen-pixel"></a> Convert from screen pixel</h4>
<p>In occasions when you need to know the corresponding location on the screen where the user gesture occurred, you can convert the LatLng point to screen pixels. The MapboxMap object provides the <code>Projection</code> from the map which allows you to convert between <code>LatLng</code> coordinates to screen pixel using <code>mapboxMap.getProjection().toScreenLocation(&lt;LatLng&gt;);</code>. The reverse is available when you have a screen location in pixels and need to convert it to a corresponding <code>LatLng</code> object.</p>
<p>A common use case for converting the values between <code>LatLng</code> and pixel coordinates is when you’d like to query a map layer or source to, for example, determine whether or not the users clicked on a POI. You can read more on how to do this in the <a href="/map-sdk/overview/query-map/">Query map features</a> documentation.</p>
<h3 id="camera-change-events"><a class="markdownIt-Anchor" href="#camera-change-events"></a> Camera change events</h3>
<p>The map’s camera represents the view looking down on the maps flat plane. In almost all cases, you’ll be interacting with the camera to adjust the map’s starting zoom and target position. The user also can manipulate the camera by performing gestures on the map such as pinch-to-zoom, two-finger scroll to tilt, and single finger moves to adjust the position.</p>
<p>The Map SDK provides a handful of camera change listeners which can notify you of any or specific camera movements. Different camera listeners are given to determine if the camera movement was caused by a user gesture, built-in API animations, or a developer-controlled movement. The snippet below shows the various camera listeners available:</p>
<pre class="hljs"><code>mapboxMap.setOnCameraMoveStartedistener(<span class="hljs-keyword">new</span> MapboxMap.OnCameraMoveStartedListener() {

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String[] REASONS = {<span class="hljs-string">"REASON_API_GESTURE"</span>, <span class="hljs-string">"REASON_DEVELOPER_ANIMATION"</span>, <span class="hljs-string">"REASON_API_ANIMATION"</span>};

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCameraMoveStarted</span><span class="hljs-params">(<span class="hljs-keyword">int</span> reason)</span> </span>{
    String string = String.format(Locale.US, <span class="hljs-string">"OnCameraMoveStarted: %s"</span>, REASONS[reason - <span class="hljs-number">1</span>])
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, string, Toast.LENGTH_LONG).show();
  }
});

mapboxMap.setOnCameraMoveListener(<span class="hljs-keyword">new</span> MapboxMap.OnCameraMoveListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCameraMove</span><span class="hljs-params">()</span> </span>{  
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, <span class="hljs-string">"onCameraMove"</span>, Toast.LENGTH_LONG).show();
  }
});

mapboxMap.setOnCameraMoveCancelListener(<span class="hljs-keyword">new</span> MapboxMap.OnCameraMoveCanceledListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCameraMoveCanceled</span><span class="hljs-params">()</span> </span>{
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, <span class="hljs-string">"onCameraMoveCanceled"</span>, Toast.LENGTH_LONG).show();
  }
});

mapboxMap.setOnCameraIdleListener(<span class="hljs-keyword">new</span> MapboxMap.OnCameraIdleListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCameraIdle</span><span class="hljs-params">()</span> </span>{
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, <span class="hljs-string">"onCameraIdle"</span>, Toast.LENGTH_LONG).show();
  }
});
</code></pre>
<h3 id="on-fling-on-scroll-events"><a class="markdownIt-Anchor" href="#on-fling-on-scroll-events"></a> On fling & on scroll events</h3>
<p>Besides the camera change listeners, the <code>MapboxMap</code> object allows you to listen into when the user scrolls or flings the map. A scroll event occurs when the user drags a single finger across the screen causing the camera position to change. A similar action from the user will cause the <code>onFling</code> callback to be invoked, but the user performs the gesture with more momentum. Only one of these events will be fired once when the user performs the particular gesture.</p>
<pre class="hljs"><code>mapboxMap.setOnScrollListener(<span class="hljs-keyword">new</span> MapboxMap.OnScrollListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onScroll</span><span class="hljs-params">()</span> </span>{
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, <span class="hljs-string">"onScroll"</span>, Toast.LENGTH_LONG).show();
  }
});

mapboxMap.setOnFlingListener(<span class="hljs-keyword">new</span> MapboxMap.OnFlingListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFling</span><span class="hljs-params">()</span> </span>{
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, <span class="hljs-string">"onFling"</span>, Toast.LENGTH_LONG).show();
  }
});
</code></pre>
<h3 id="marker-and-info-window-events"><a class="markdownIt-Anchor" href="#marker-and-info-window-events"></a> Marker and info window events</h3>
<p>The Maps SDK provides a handy listener for capturing when a user taps on a marker. By default, all markers come with an onMarkerClick event listener for displaying and hiding info windows. You can override this default event listener and set your own with the <code>setOnMarkerClickListener</code> method.</p>
<p>To display a toast message with the clicked marker’s title, listen for a click event with <code>setOnMarkerClickListener</code> and finally call Toast.makeText(). To prevent displaying a toast message and an info window at the same time, return true at the end:</p>
<pre class="hljs"><code>mapboxMap.setOnMarkerClickListener(<span class="hljs-keyword">new</span> MapboxMap.OnMarkerClickListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onMarkerClick</span><span class="hljs-params">(@NonNull Marker marker)</span> </span>{
    Toast.makeText(MainActivity.<span class="hljs-keyword">this</span>, marker.getTitle(), Toast.LENGTH_LONG).show();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }
});
</code></pre>
<p>In a similar case, the info window offers a handful of listeners for being notified when an info windows clicked, long clicked, or when a user closes the window.</p>
<pre class="hljs"><code>mapboxMap.setOnInfoWindowLongClickListener(OnInfoWindowLongClickListener);
mapboxMap.setOnInfoWindowCloseListener(OnInfoWindowCloseListener);

mapboxMap.setOnInfoWindowClickListener(<span class="hljs-keyword">new</span> MapboxMap.OnInfoWindowClickListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onInfoWindowClick</span><span class="hljs-params">(@NonNull Marker marker)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
  }
});
</code></pre>
<h3 id="map-change-events"><a class="markdownIt-Anchor" href="#map-change-events"></a> Map change events</h3>
<p>The map view goes through a series of events while building/changing the map. The <code>OnMapChangedListener</code> provided can be used to notify you when one or multiple events occur you’re interested in. This includes knowing when the map starts and finishes loading the map style or when frames are finished rendering.</p>
<p>Instead of adding the listener through the <code>MapboxMap</code> object, the listeners added using the <code>MapView</code>, <code>mapView.addOnMapChangedListener(OnMapChangedListener());</code>. When a new map change occurs, the <code>onMapChanged</code> callback is invoked. This provides the constant, as an integer, as the parameter which you can then use to match up with one of the constants listed in the table below.</p>
<table>
<thead>
<tr>
<th>MapChange Constants</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REGION_WILL_CHANGE</code></td>
<td>This event is triggered whenever the currently displayed map region is about to change without an animation.</td>
</tr>
<tr>
<td><code>REGION_WILL_CHANGE_ANIMATED</code></td>
<td>This event is triggered whenever the currently displayed map region is about to change with an animation.</td>
</tr>
<tr>
<td><code>REGION_IS_CHANGING</code></td>
<td>This event is triggered whenever the currently displayed map region is changing.</td>
</tr>
<tr>
<td><code>REGION_DID_CHANGE</code></td>
<td>This event is triggered whenever the currently displayed map region finished changing without an animation.</td>
</tr>
<tr>
<td><code>REGION_DID_CHANGE_ANIMATED</code></td>
<td>This event is triggered whenever the currently displayed map region finished changing with an animation.</td>
</tr>
<tr>
<td><code>WILL_START_LOADING_MAP</code></td>
<td>This event is triggered when the map is about to start loading a new map style.</td>
</tr>
<tr>
<td><code>DID_FINISH_LOADING_MAP</code></td>
<td>This is triggered when the map has successfully loaded a new map style.</td>
</tr>
<tr>
<td><code>DID_FAIL_LOADING_MAP</code></td>
<td>This event is triggered when the map has failed to load a new map style.</td>
</tr>
<tr>
<td><code>WILL_START_RENDERING_FRAME</code></td>
<td>This event is triggered when the map will start rendering a frame.</td>
</tr>
<tr>
<td><code>DID_FINISH_RENDERING_FRAME</code></td>
<td>This event is triggered when the map finished rendering a frame.</td>
</tr>
<tr>
<td><code>DID_FINISH_RENDERING_FRAME_FULLY_RENDERED</code></td>
<td>This event is triggered when the map finished rendering the frame fully.</td>
</tr>
<tr>
<td><code>WILL_START_RENDERING_MAP</code></td>
<td>This event is triggered when the map will start rendering the map.</td>
</tr>
<tr>
<td><code>DID_FINISH_RENDERING_MAP</code></td>
<td>This event is triggered when the map finished rendering the map.</td>
</tr>
<tr>
<td><code>DID_FINISH_RENDERING_MAP_FULLY_RENDERED</code></td>
<td>This event is triggered when the map is fully rendered.</td>
</tr>
<tr>
<td><code>DID_FINISH_LOADING_STYLE</code></td>
<td>Triggered when a style has finished loading.</td>
</tr>
<tr>
<td><code>SOURCE_DID_CHANGE</code></td>
<td>Triggered when a source attribution changes.</td>
</tr>
</tbody>
</table>
<p>When the event that you were interested in actually occurs and you no longer need to listen to the map change events, <code>mapView.removeOnMapChangedListener(mapChangeListener)</code> can be used to remove the listener.</p>
</div></div></div></div></div></div></div></div></div></div><script src="/android-docs/bundle.js?t=1500485449854"></script></body></html>