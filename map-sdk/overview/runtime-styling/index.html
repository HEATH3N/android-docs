<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Runtime Styling | Android Documentation</title><meta name="type" data-type="enum" content="Android Documentation"/><meta name="title" data-type="string" content="Runtime Styling | Android Documentation"/><link href="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css" rel="stylesheet"/><script async="" defer="" src="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js"></script><link href="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.min.css" rel="stylesheet"/><script src="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.js"></script><link rel="stylesheet" href="stylesheet.css" type="text/css"/><style>.border--3{border-width:3px!important}.bg-green{background-color:#8cca44!important}.icon-android-green svg{color:#8cca44}.bright-blue-color{color:#0082ff}.border--gray-less-faint{border-color:#e8ebee!important}.hmax130 img{max-height:130px}.wmax260{max-width:260px}.text-decoration-none{text-decoration:none!important}.unstyled-list li{list-style-type:none!important}.overflow-y{overflow-y:auto}.t48{top:48px}.b0{bottom:0}.limiter{padding-left:24px;padding-right:24px;width:100%}@media (min-width:1200px){.limiter{padding-left:12.5%!important;padding-right:12.5%!important}}@media (min-width:440px){.note-card{margin-top:-12px;width:240px;margin-left:24px;padding-bottom:24px}}@media (max-width:640px){.mobile-left-nav{visibility:collapse;width:0;padding:0}}@media (max-width:640px){.mobile-right-nav{visibility:hidden;width:0;padding:0}}@media (min-width:640px){.nav-mobile{visibility:hidden}}@media (max-width:640px){.mobile-right-nav svg{visibility:visible}}@media (max-width:800px){.content{width:100%!important}}code p{font-weight:lighter;font-size:11px}code,pre{font-family:Fira Mono Medium,Monaco,monospace!important;font-weight:700!important;font-size:13px!important;word-break:normal!important}pre{background-color:#232323!important}.prose h1,h2,h3,h4,h5,h6{font-weight:400!important}.prose h3{margin-top:32px;border-top:1px solid rgba(198,210,225,.50196)}.prose h3:first-child{border-top:0}body .prose blockquote{border-left:5px solid #56adec;background-color:#fafafa;border-radius:2px;word-wrap:break-word;padding-top:12px;padding-bottom:12px;padding-right:12px}.toc{display:block!important;-ms-flex-negative:0!important;flex-shrink:0!important;-ms-flex-preferred-size:auto!important;flex-basis:auto!important;list-style-type:none;color:#273d56;position:fixed;top:42px;bottom:0;overflow-y:auto;padding-right:20px;padding-bottom:20px;padding-top:24px}@media (max-width:800px){.toc{visibility:hidden}}.toc-subheaders{font-size:12px;display:inline-block;line-height:20px;margin-bottom:12px}.page-hover:hover,.toc-subheaders a:hover{color:#0082ff}.nav-item:hover{color:#0082ff!important;border-color:#273d56}.doc-ul>.doc-ul-item:before{content:"";width:8px;height:8px;border-radius:2px;border:1px solid #1f3349;opacity:.4;position:absolute;margin:9px 0 0 -20px}.doc-ol{counter-reset:listItem}.doc-ol>.doc-ol-item{margin:3px 0}ol li{list-style-type:none}ol li:before{counter-increment:listItem;content:counter(listItem);font-size:12px;border-radius:3px;padding:1px 6px;border:1px solid #c6d2e1;margin-right:12px}.hljs{color:#a9b7c6;background:#232323;display:block;overflow-x:auto;padding:.5em}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#56b881}.hljs-comment,.hljs-quote{color:gray}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#56b881}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><div id="react-mount"><div class="grid" data-reactroot="" data-reactid="1" data-react-checksum="-234526198"><div class="z1 min48 flex-parent--center-main flex-parent w-full border-b border-t bg-white border--gray-less-faint fixed" data-reactid="2"><div class="wmax1200 w-full pl24 pr24 flex-parent--space-between-main flex-parent" data-reactid="3"><div class="flex-child col col--6 inline-block" data-reactid="4"><div class="txt-s mobile-left-nav py12 bg-transparent btn px0 color-gray-light" data-reactid="5"><strong data-reactid="6">Platform</strong></div><div class="txt-s py12 bg-transparent btn  color-gray-dark" data-reactid="7"><strong data-reactid="8">Android</strong></div><div class="txt-s mobile-left-nav py12 bg-transparent btn px0 color-gray-light" data-reactid="9"><strong data-reactid="10">Product</strong></div><div style="display:inline-block;" data-reactid="11"><button class="txt-s py12 nav-item bg-transparent btn flex-parent flex-parent--center-cross color-gray-dark" data-reactid="12"><strong data-reactid="13"><!-- react-text: 14 -->Map SDK<!-- /react-text --><!-- react-text: 15 --><!-- /react-text --><!-- react-text: 16 --><!-- /react-text --><!-- react-text: 17 --><!-- /react-text --></strong><svg class="icon" data-reactid="18"><use href="#icon-chevron-down" data-reactid="19"></use></svg></button></div></div><div class="flex-child col col--6 flex-parent flex-parent--end-main" data-reactid="20"><div style="display:inherit;" data-reactid="21"><button class="block flex-parent flex-parent--center-cross" data-reactid="22"><svg class="icon--l nav-mobile color-gray-dark opacity75" data-reactid="23"><use href="#icon-menu" data-reactid="24"></use></svg></button></div><a class="py12 transition mobile-right-nav unround btn color-gray-dark nav-item bg-transparent txt-s  border-b border--3" href="/android-docs/map-sdk/overview/" data-reactid="25">Overview</a><a class="py12 transition mobile-right-nav unround btn color-gray-dark nav-item bg-transparent txt-s  " href="/android-docs/map-sdk/examples/" data-reactid="26">Examples</a><a class="py12 transition mobile-right-nav unround btn color-gray-dark nav-item bg-transparent txt-s  " href="/android-docs/map-sdk/tutorials/" data-reactid="27">Tutorials</a></div></div></div><div class="scroll-styled flex-parent--center-main flex-parent limiter pb96 pl24 pr24 pt24 overflow-y t48 b0 fixed flex-child" data-reactid="28"><div class="flex-parent--space-between-main flex-parent" data-reactid="29"><div class="col--3 pt42 col toc flex-child--no-shrink  scroll-styled" data-reactid="30"><div data-reactid="31"><li class="txt-bold txt-fancy" data-reactid="32"><a class="page-hover text-decoration-none" href="/android-docs/map-sdk/overview/" data-reactid="33">Map SDK</a></li><!-- react-text: 34 --><!-- /react-text --></div><div data-reactid="35"><li class="txt-bold txt-fancy" data-reactid="36"><a class="page-hover text-decoration-none" href="/android-docs/map-sdk/overview/styling-map/" data-reactid="37">Styling the map</a></li><!-- react-text: 38 --><!-- /react-text --></div><div data-reactid="39"><li class="txt-bold txt-fancy" data-reactid="40"><a class="page-hover text-decoration-none" href="/android-docs/map-sdk/overview/annotations/" data-reactid="41">Annotations</a></li><!-- react-text: 42 --><!-- /react-text --></div><div data-reactid="43"><li class="txt-bold txt-fancy" data-reactid="44"><a class="page-hover text-decoration-none" href="/android-docs/map-sdk/overview/offline/" data-reactid="45">Offline</a></li><!-- react-text: 46 --><!-- /react-text --></div><div data-reactid="47"><li class="txt-bold txt-fancy" data-reactid="48"><a class="page-hover text-decoration-none" href="/android-docs/map-sdk/overview/runtime-styling/" data-reactid="49"><div class="bright-blue-color" data-reactid="50">Runtime Styling</div></a></li><div class="ml6 pt6" data-reactid="51"><ul class="toc-subheaders">
<li>
<ul>
<li><a href="#sources">Sources</a></li>
<li><a href="#layers">Layers</a></li>
<li><a href="#image">Image</a></li>
</ul>
</li>
</ul>
</div></div><div data-reactid="52"><li class="txt-bold txt-fancy" data-reactid="53"><a class="page-hover text-decoration-none" href="/android-docs/api/map-sdk/5.0.2/index.html" data-reactid="54">API Reference</a></li><!-- react-text: 55 --><!-- /react-text --></div><!-- react-text: 56 --><!-- /react-text --></div><div data-reactid="57"><div class="prose color-gray-dark" data-reactid="58"><div class="content col--9 col col--offl3" data-reactid="59"><div class="pt12 doc-ul doc-ol pb96 wmax1200 doc-ol-item" data-reactid="60"><div class="markdown" data-reactid="61"><div data-reactid="62"><h1 id="runtime-styling"><a class="markdownIt-Anchor" href="#runtime-styling"></a> Runtime Styling</h1>
<div class="fr flex-parent">
  <a href="https://www.mapbox.com/mapbox-gl-js/style-spec/" class="text-decoration-none flex-child--no-shrink mt6 color-blue-on-hover note-card flex-child-mxl">
    <div class="border round wmax360 border--gray-light flex-parent">
      <div class="flex-child p12">
        <div class="txt-s txt-bold">
          Style Spec Info
          <span class="txt-xs txt-bold align-middle px6 color-purple round bg-purple-faint">GUIDE</span>
        </div>
        <div class="txt-s mt3 mb0 color-gray">
          View a full list of the features in runtime styling not specific to Android.
        </div>
      </div>
      <div class="flex-child flex-child--no-shrink w18 fr border-l border--gray-light flex-parent flex-parent--center-cross">
        <svg class='flex-child align-middle icon--l'><use href='#icon-chevron-right'/></svg>
      </div>
    </div>
  </a>
</div>
<p>Using Runtime styling, your able to dynamically change the look and feel of your map in real time. Lighten or darken the map based on the time of day, personalize icons and the colors of parks based on your users’ activity, switch languages on the fly, or bump the size of labels based on user preferences to improve legibility. Style existing map data or mix in your own – Runtime Styling is performant even with massive datasets.</p>
<p>Runtime styling expands upon the design power of Mapbox Studio and exposes all the same properties and attributes directly to mobile developers in our SDK.</p>
<h3 id="sources"><a class="markdownIt-Anchor" href="#sources"></a> Sources</h3>
<p>Sources hold the data to be used inside a layer in your map. There are a handful of different source types supported, choosing one depends on your data type. Adding a source won’t instantly make data appear on the map because sources don’t contain styling details like color or width. Layers refer to a source and give it a visual representation.</p>
<p>When creating a new source, two parameters are required, a source ID (String) and the source date.</p>
<h4 id="vector"><a class="markdownIt-Anchor" href="#vector"></a> Vector</h4>
<p>Vector source tiles must be in <a href="https://www.mapbox.com/developers/vector-tiles/">Mapbox Vector Tile format</a>. All layers that use a vector source must specify a “source-layer” value. For vector tiles hosted by Mapbox, the “url” value should be of the form <code>mapbox://mapid</code>.</p>
<pre class="hljs"><code><span class="hljs-comment">// Adding a vector source layer</span>
VectorSource vectorSource = <span class="hljs-keyword">new</span> VectorSource(<span class="hljs-string">"vector-source"</span>, <span class="hljs-string">"mapbox://mapbox.mapbox-terrain-v2"</span>);
mapboxMap.addSource(vectorSource);
</code></pre>
<h4 id="raster"><a class="markdownIt-Anchor" href="#raster"></a> Raster</h4>
<p>Raster source tiles can be added to your map if they are in TileJSON format. If hosted by Mapbox, the “url” value should be of the form <code>mapbox://mapid</code>.</p>
<pre class="hljs"><code><span class="hljs-comment">// Adding a raster source layer</span>
RasterSource rasterSource = <span class="hljs-keyword">new</span> RasterSource(<span class="hljs-string">"raster-source"</span>, <span class="hljs-string">"mapbox://mapbox.u8yyzaor"</span>);
mapboxMap.addSource(rasterSource);
</code></pre>
<h4 id="geojson"><a class="markdownIt-Anchor" href="#geojson"></a> GeoJson</h4>
<div class="fr flex-parent">
  <a href="https://github.com/mapbox/mapbox-android-demo/blob/master/MapboxAndroidDemo/src/main/java/com/mapbox/mapboxandroiddemo/examples/styles/LineLayerActivity.java" class="text-decoration-none flex-child--no-shrink mt6 color-blue-on-hover note-card flex-child-mxl">
    <div class="border round wmax360 border--gray-light flex-parent">
      <div class="flex-child p12">
        <div class="txt-s txt-bold">
          Add a GeoJSON source
          <span class="txt-xs txt-bold align-middle px6 color-blue round bg-blue-faint">EXAMPLE</span>
        </div>
        <div class="txt-s mt3 mb0 color-gray">
          Create a GeoJSON feature collection dynamically and then add it as a map source.
        </div>
      </div>
      <div class="flex-child flex-child--no-shrink w18 fr border-l border--gray-light flex-parent flex-parent--center-cross">
        <svg class='flex-child align-middle icon--l'><use href='#icon-chevron-right'/></svg>
      </div>
    </div>
  </a>
</div>
<p>Adding a GeoJSON source can be done in a few different ways. Providing a URL to the GeoJSON raw data hosted online (or locally inside the assets folder for example) or you can build your own GeoJSON feature collection directly inside the code. The snippets of code below show the different ways to add a GeoJSON source to your map.</p>
<p>Add a GeoJSON source from URL:</p>
<pre class="hljs"><code>URL geoJsonUrl = <span class="hljs-keyword">new</span> URL(<span class="hljs-string">"https://url-to-geojson-file.geojson"</span>);
GeoJsonSource geoJsonSource = <span class="hljs-keyword">new</span> GeoJsonSource(<span class="hljs-string">"geojson-source"</span>, geoJsonUrl);
mapboxMap.addSource(geoJsonSource);
</code></pre>
<p>Load a locally stored GeoJSON file and add it to your map as a source:</p>
<pre class="hljs"><code><span class="hljs-comment">// Either use the method provided below or your preferred way of loading in a JSON file.</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">loadJsonFromAsset</span><span class="hljs-params">(String filename)</span> <span class="hljs-keyword">throws</span> IOException </span>{
  <span class="hljs-comment">// loads in GeoJSON files from the assets folder.</span>
  InputStream is = getAssets().open(filename);
  <span class="hljs-keyword">int</span> size = is.available();
  <span class="hljs-keyword">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[size];
  is.read(buffer);
  is.close();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(buffer, <span class="hljs-string">"UTF-8"</span>);
}

GeoJsonSource source = <span class="hljs-keyword">new</span> GeoJsonSource(<span class="hljs-string">"geojson-source"</span>, loadJsonFromAsset(<span class="hljs-string">"local_file.geojson"</span>));
mapboxMap.addSource(indoorBuildingSource);
</code></pre>
<p>Create a GeoJSON feature collection and then add it to your map:</p>
<pre class="hljs"><code><span class="hljs-comment">// Create a list to store our line coordinates.</span>
List routeCoordinates = <span class="hljs-keyword">new</span> ArrayList&lt;Position&gt;();
routeCoordinates.add(Position.fromCoordinates(-<span class="hljs-number">118.394391</span>, <span class="hljs-number">33.397676</span>));
routeCoordinates.add(Position.fromCoordinates(-<span class="hljs-number">118.370917</span>, <span class="hljs-number">33.391142</span>));

<span class="hljs-comment">// Create the LineString from the list of coordinates and then make a GeoJSON</span>
<span class="hljs-comment">// FeatureCollection so we can add the line to our map as a layer.</span>
LineString lineString = LineString.fromCoordinates(routeCoordinates);
FeatureCollection featureCollection =
  FeatureCollection.fromFeatures(<span class="hljs-keyword">new</span> Feature[]{Feature.fromGeometry(lineString)});

GeoJsonSource geoJsonSource = <span class="hljs-keyword">new</span> GeoJsonSource(<span class="hljs-string">"geojson-source"</span>, featureCollection);
mapboxMap.addSource(geoJsonSource);
</code></pre>
<div class="fr flex-parent">
  <a href="https://github.com/mapbox/mapbox-android-demo/blob/master/MapboxAndroidDemo/src/main/java/com/mapbox/mapboxandroiddemo/examples/styles/LineLayerActivity.java" class="text-decoration-none flex-child--no-shrink mt6 color-blue-on-hover note-card  flex-child-mxl">
    <div class="border round wmax360 border--gray-light flex-parent">
      <div class="flex-child p12">
        <div class="txt-s txt-bold">
          Runtime Animations
          <span class="txt-xs txt-bold align-middle px6 color-red round bg-red-faint">TUTORIAL</span>
        </div>
        <div class="txt-s mt3 mb0 color-gray">
          Android tutorial walking through various ways to animate map sources and layers.
        </div>
      </div>
      <div class="flex-child flex-child--no-shrink w18 fr border-l border--gray-light flex-parent flex-parent--center-cross">
        <svg class='flex-child align-middle icon--l'><use href='#icon-chevron-right'/></svg>
      </div>
    </div>
  </a>
</div>
<p>A benefit of having your data inside a GeoJSON source is that you can update, remove, or add additional features inside the source at anytime. This provides a solution to animating data in your map through the Runtime Styling API. For example, using an Android <a href="https://developer.android.com/reference/android/animation/ValueAnimator.html">ValueAnimator</a>, you can move a feature by updating it’s coordinates within the GeoJSON data.</p>
<!-- TODO add to animation tutorial
```java
private void animateSource() {
ValueAnimator locationAnimator = ValueAnimator.ofObject(new PointEvaluator(),
  Point.fromCoordinates(new double[] {previousLocation.getLongitude(), previousLocation.getLatitude()}),
  Point.fromCoordinates(new double[] {location.getLongitude(), location.getLatitude()})
    );

locationAnimator.setDuration(1000);
locationAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
  @Override
  public void onAnimationUpdate(ValueAnimator animation) {
    if (locationGeoJsonSource != null) {
      locationGeoJsonSource.setGeoJson(FeatureCollection.fromFeatures(
        new Feature[] {Feature.fromGeometry((Point) animation.getAnimatedValue())}
      ));
    }
  }
});
locationAnimator.start();
}

// Method is used to interpolate the user icon animation.
private static class PointEvaluator implements TypeEvaluator<Point> {
  @Override
  public Point evaluate(float fraction, Point startValue, Point endValue) {
    return Point.fromCoordinates(new double[] {
      startValue.getCoordinates().getLongitude() + (
        (endValue.getCoordinates().getLongitude() - startValue.getCoordinates().getLongitude()) * fraction),
      startValue.getCoordinates().getLatitude() + (
        (endValue.getCoordinates().getLatitude() - startValue.getCoordinates().getLatitude()) * fraction)
    });
  }
}
``` -->
<!-- link to GoJSON plugin -->
<h3 id="layers"><a class="markdownIt-Anchor" href="#layers"></a> Layers</h3>
<h4 id="background"><a class="markdownIt-Anchor" href="#background"></a> Background</h4>
<h4 id="fill"><a class="markdownIt-Anchor" href="#fill"></a> Fill</h4>
<h4 id="line"><a class="markdownIt-Anchor" href="#line"></a> Line</h4>
<h4 id="symbol"><a class="markdownIt-Anchor" href="#symbol"></a> Symbol</h4>
<h4 id="raster-2"><a class="markdownIt-Anchor" href="#raster-2"></a> Raster</h4>
<h4 id="circle"><a class="markdownIt-Anchor" href="#circle"></a> Circle</h4>
<h3 id="image"><a class="markdownIt-Anchor" href="#image"></a> Image</h3>
</div></div></div></div></div></div></div></div></div></div><script src="/android-docs/bundle.js?t=1496264501581"></script></body></html>