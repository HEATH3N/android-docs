<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Geocoder | Android Documentation</title><meta name="type" data-type="enum" content="Android Documentation"/><meta name="title" data-type="string" content="Geocoder | Android Documentation"/><link href="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css" rel="stylesheet"/><script async="" defer="" src="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js"></script><link href="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.min.css" rel="stylesheet"/><script src="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.js"></script><link rel="stylesheet" href="stylesheet.css" type="text/css"/><style>.border--3{border-width:3px!important}.bg-green{background-color:#8cca44!important}.icon-android-green svg{color:#8cca44}.bright-blue-color{color:#0082ff}.bright-blue-color-on-hover:hover{color:#0082ff!important}.border--bright-blue-color{border-color:#273d56}.border--gray-less-faint{border-color:#e8ebee!important}.bright-blue-color-on-hover-anchor a:hover{color:#0082ff}.hmax130 img{max-height:130px}.wmax260{max-width:260px}.text-decoration-none{text-decoration:none!important}.unstyled-list li{list-style-type:none!important}.overflow-y{overflow-y:auto}.t48{top:48px}.b0{bottom:0}.txt-ms{font-size:13px!important;line-height:18px}.limiter{padding-left:24px;padding-right:24px;width:100%}@media (min-width:1200px){.limiter{padding-left:12.5%!important;padding-right:12.5%!important}}.prose h1,h2,h3,h4,h5,h6{font-weight:400!important}@media (min-width:440px){.note-card{margin-top:-12px;width:240px;margin-left:24px;padding-bottom:24px}}code,pre{font-family:Fira Mono Medium,Monaco,monospace!important;font-weight:700!important;font-size:12px!important;word-break:normal!important}pre{background-color:#232323!important}.doc-ul>.doc-ul-item:before{content:"";width:8px;height:8px;border-radius:2px;border:1px solid #1f3349;opacity:.4;position:absolute;margin:9px 0 0 -20px}.doc-ol{counter-reset:listItem}.doc-ol>.doc-ol-item{margin:3px 0}ol li{list-style-type:none}ol li:before{counter-increment:listItem;content:counter(listItem);font-size:12px;border-radius:3px;padding:1px 6px;border:1px solid #c6d2e1;margin-right:12px}.hljs{color:#a9b7c6;background:#232323;display:block;overflow-x:auto;padding:.5em}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#56b881}.hljs-comment,.hljs-quote{color:gray}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#56b881}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><div id="react-mount"><div class="grid" data-reactroot="" data-reactid="1" data-react-checksum="-1262936776"><div class="z1 min48 flex-parent--center-main flex-parent w-full border-b border-t bg-white border--gray-less-faint fixed" data-reactid="2"><div class="wmax1200 w-full pl24 pr24 flex-parent--space-between-main flex-parent" data-reactid="3"><div class="flex-child col col--6 inline-block" data-reactid="4"><div class="txt-s py12 bg-transparent btn px0 color-gray-light" data-reactid="5"><strong data-reactid="6">Platform</strong></div><div class="txt-s py12 bg-transparent btn  color-gray-dark" data-reactid="7"><strong data-reactid="8">Android</strong></div><div class="txt-s py12 bg-transparent btn px0 color-gray-light" data-reactid="9"><strong data-reactid="10">Product</strong></div><div style="display:inline-block;" data-reactid="11"><button class="txt-s py12 border--bright-blue-color bright-blue-color-on-hover bg-transparent btn flex-parent flex-parent--center-cross color-gray-dark" data-reactid="12"><strong data-reactid="13">Mapbox Services</strong><svg class="icon" data-reactid="14"><use xlink:href="#icon-chevron-down" data-reactid="15"></use></svg></button></div></div><div class="flex-child col col--6 flex-parent flex-parent--end-main" data-reactid="16"><a class="py12 transition mobile-right-nav unround btn color-gray-dark border--bright-blue-color bright-blue-color-on-hover bg-transparent txt-s  border-b border--3" href="/android-docs/mapbox-services/overview/" data-reactid="17">Overview</a><a class="py12 transition mobile-right-nav unround btn color-gray-dark border--bright-blue-color bright-blue-color-on-hover bg-transparent txt-s  " href="/android-docs/mapbox-services/examples/" data-reactid="18">Examples</a><!-- react-text: 19 --><!-- /react-text --></div></div></div><div class="scroll-styled flex-parent--center-main flex-parent limiter pb96 pl24 pr24 pt24 overflow-y t48 b0 fixed flex-child" data-reactid="20"><div class="flex-parent--space-between-main flex-parent" data-reactid="21"><div class="col col--2 pt42 pr18 pb18 flex-child--no-shrink fixed color-gray-dark unstyled-list scroll-styled" data-reactid="22"><div data-reactid="23"><li class="txt-bold txt-fancy" data-reactid="24"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/mapbox-services/overview/" data-reactid="25">Mapbox Services</a></li><!-- react-text: 26 --><!-- /react-text --></div><div data-reactid="27"><li class="txt-bold txt-fancy" data-reactid="28"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/mapbox-services/overview/directions-matrix/" data-reactid="29">Directions Matrix</a></li><!-- react-text: 30 --><!-- /react-text --></div><div data-reactid="31"><li class="txt-bold txt-fancy" data-reactid="32"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/mapbox-services/overview/geocoder/" data-reactid="33"><div class="bright-blue-color" data-reactid="34">Geocoder</div></a></li><div class="ml6 pt6" data-reactid="35"><ul class="txt-s inline-block mb12 bright-blue-color-on-hover-anchor">
<li>
<ul>
<li><a href="#geocoding-request">Geocoding request</a></li>
<li><a href="#geocoding-response">Geocoding response</a></li>
<li><a href="#reverse-geocoding">Reverse geocoding</a></li>
<li><a href="#android-widgets">Android widgets</a></li>
<li><a href="#batch-geocoding">Batch geocoding</a></li>
</ul>
</li>
</ul>
</div></div><div data-reactid="36"><li class="txt-bold txt-fancy" data-reactid="37"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/mapbox-services/overview/static-image/" data-reactid="38">Static Image</a></li><!-- react-text: 39 --><!-- /react-text --></div><div data-reactid="40"><li class="txt-bold txt-fancy" data-reactid="41"><a class="bright-blue-color-on-hover text-decoration-none" href="/android-docs/mapbox-services/overview/telemetry/" data-reactid="42">Telemetry</a></li><!-- react-text: 43 --><!-- /react-text --></div><div style="display:inline-block;" data-reactid="44"><button class="txt-fancy bright-blue-color-on-hover" data-reactid="45"><strong data-reactid="46">API Reference</strong></button></div><!-- react-text: 47 --><!-- /react-text --><!-- react-text: 48 --><!-- /react-text --></div><div data-reactid="49"><div class="prose color-gray-dark" data-reactid="50"><div class="content col--9 col col--offl3" data-reactid="51"><div class="pt12 doc-ul pb96 doc-ol wmax1200 doc-ol-item" data-reactid="52"><div class="markdown" data-reactid="53"><div data-reactid="54"><h1 id="geocoder"><a class="markdownIt-Anchor" href="#geocoder"></a> Geocoder</h1>
<p>You’ll find the wrapper for our geocoder API included in the mapbox-java-services module. Specifically, the MapboxGeocoding is used to request both geocoding and reverse geocoding. Forward geocoding will take a String such as a street address or point of interest and transform it into a <a href="#position-and-point-objects">Position</a> object. Reverse geocoding does the opposite, taking in a Position object and transforming it into an address. The amount of detail provided in the response varies. For example, one response might contain a full address while another response will only contain the city and country.</p>
<p>It’s recommended to first read over <a href="https://www.mapbox.com/api-documentation/#geocoding">the general geocoding API</a> documentation because not all available parameters are listed here.</p>
<blockquote>
<p><strong>Note:</strong> Make sure you have included to correct permissions inside your AndroidManifest if you plan to use this API inside an Android application.</p>
</blockquote>
<h3 id="geocoding-request"><a class="markdownIt-Anchor" href="#geocoding-request"></a> Geocoding request</h3>
<p>Before making the geocoding request, you must build the MapboxGeocoding object passing in two required parameters; a valid Mapbox <a href="#access-token">access token</a> and a location/query (typically an address or description). Many other parameters are available to help bias and manipulate the response you receive.</p>
<blockquote>
<p><strong>Note:</strong> If you are using our geocoder to find locations around the user’s position, you can use <code>setProximity()</code> passing in their location as a Position object to bias results to around their location.</p>
</blockquote>
<pre class="hljs"><code>MapboxGeocoding mapboxGeocoding = <span class="hljs-keyword">new</span> MapboxGeocoding.Builder()
  .setAccessToken(Mapbox.getAccessToken())
  .setLocation(<span class="hljs-string">"1600 Pennsylvania Ave NW"</span>)
  .build();

</code></pre>
<h3 id="geocoding-response"><a class="markdownIt-Anchor" href="#geocoding-response"></a> Geocoding response</h3>
<p>Once you have built your MapboxGeocoding object with all the parameters that you’d like to use in the request, you’ll need to asynchronously send the request using enqueueCall. Once the request receives a response, it will tell the Callback where you can handle the response appropriately.</p>
<blockquote>
<p><strong>Note:</strong> In case your user leaves the activity or application before the callback’s notified, you should use <code>mapboxGeocoding.cancelCall()</code> within your onDestroy() lifecycle method.</p>
</blockquote>
<pre class="hljs"><code>mapboxGeocoding.enqueueCall(<span class="hljs-keyword">new</span> Callback&lt;GeocodingResponse&gt;() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(Call&lt;GeocodingResponse&gt; call, Response&lt;GeocodingResponse&gt; response)</span> </span>{
    List&lt;CarmenFeature&gt; results = response.body().getFeatures();
    <span class="hljs-keyword">if</span> (results.size() &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// Log the first results position.</span>
      Position firstResultPos = results.get(<span class="hljs-number">0</span>).asPosition();
      Log.d(TAG, <span class="hljs-string">"onResponse: "</span> + firstResultPos.toString());
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// No result for your request were found.</span>
      Log.d(TAG, <span class="hljs-string">"onResponse: No result found"</span>);
    }
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(Call&lt;GeocodingResponse&gt; call, Throwable throwable)</span> </span>{
    throwable.printStackTrace();
  }
});
</code></pre>
<h3 id="reverse-geocoding"><a class="markdownIt-Anchor" href="#reverse-geocoding"></a> Reverse geocoding</h3>
<p>The process of turning a string address to a coordinate is called reverse geocoding. Instead of supplying the builder with a string address you’d pass in coordinates instead. Handling the response is like forward geocoding. While one coordinate is given, the response will often give you multiple valid ways to describe the specific location. For example, one might be the street name while another result will be the country. The ordering of the list usually goes from most relevant to least.</p>
<p>You can narrow the response like forward geocoding by biasing the result using the available parameters provided in the builder.</p>
<pre class="hljs"><code>MapboxGeocoding reverseGeocode = <span class="hljs-keyword">new</span> MapboxGeocoding.Builder()
  .setAccessToken(Mapbox.getAccessToken())
        .setCoordinates(Position.fromCoordinates(-<span class="hljs-number">77.03655</span>, <span class="hljs-number">38.89770</span>))
        .setGeocodingType(GeocodingCriteria.TYPE_ADDRESS)
        .build();

<span class="hljs-comment">// The result of this reverse geocode will give you "Pennsylvania Ave NW"</span>
</code></pre>
<h3 id="android-widgets"><a class="markdownIt-Anchor" href="#android-widgets"></a> Android widgets</h3>
<p>In the geocoding examples above, we have been performing request to the API by directly using the builder, making the call, and then handling the response. The Android widgets found in the mapbox-android-ui module make the process of geocoding a bit easier by offering basic widgets.</p>
<p>For forward geocoding, the AutoCompleteWidget is offered. It provides a search box with support for autocomplete results. When the user clicks a result, <code>onFeatureClick</code>‘s invoked and you can get the address’ coordinates and handle them.</p>
<!-- TODO link Example -->
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">com.mapbox.services.android.ui.geocoder.GeocoderAutoCompleteView</span>
  <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/autoCompleteWidget"</span>
  <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
  <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
  <span class="hljs-attr">android:hint</span>=<span class="hljs-string">"Search Location"</span>
  <span class="hljs-attr">android:maxLines</span>=<span class="hljs-string">"1"</span>/&gt;</span>
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">// Set up autocomplete widget</span>
GeocoderAutoCompleteView autoComplete = (GeocoderAutoCompleteView) findViewById(R.id.autoCompleteWidget);
autoComplete.setAccessToken(Mapbox.getAccessToken());
autoComplete.setType(GeocodingCriteria.TYPE_POI);
autoComplete.setOnFeatureListener(<span class="hljs-keyword">new</span> GeocoderAutoCompleteView.OnFeatureListener() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFeatureClick</span><span class="hljs-params">(CarmenFeature feature)</span> </span>{
    Position position = feature.asPosition();
    <span class="hljs-comment">// using the position you can drop a marker or move the map's camera.</span>
  }
});
</code></pre>
<h3 id="batch-geocoding"><a class="markdownIt-Anchor" href="#batch-geocoding"></a> Batch geocoding</h3>
<!-- enterprise -->
<p>Batch requests have the same parameters as normal requests, but can include more than one query by separating queries with the ; character. The mode parameter also needs to use <code>MODE_PLACES_PERMANENT</code>. You can do up to 50 forward or reverse geocoding queries in a single request. The response is an array of individual geocoder responses formatted the same as individual results. Each query in a batch request counts individually against your account’s rate limits.</p>
<pre class="hljs"><code>MapboxGeocoding client = <span class="hljs-keyword">new</span> MapboxGeocoding.Builder()
  .setAccessToken(Mapbox.getAccessToken())
  .setMode(GeocodingCriteria.MODE_PLACES_PERMANENT)
  .setLocation(<span class="hljs-string">"20001;20009;22209"</span>)
  .setBaseUrl(mockUrl.toString())
  .build();
</code></pre>
</div></div></div></div></div></div></div></div></div></div><script src="/android-docs/bundle.js?t=1496945502141"></script></body></html>