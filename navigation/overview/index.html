<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Navigation SDK | Android Documentation</title><meta name="type" data-type="enum" content="Android Documentation"/><meta name="title" data-type="string" content="Navigation SDK | Android Documentation"/><link href="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.min.css" rel="stylesheet"/><script async="" defer="" src="https://api.mapbox.com/mapbox-assembly/v0.12.0/assembly.js"></script><link href="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.min.css" rel="stylesheet"/><script src="https://api.mapbox.com/mapbox-assembly/mapbox-addon/v0.10.0/assembly.js"></script><link rel="stylesheet" href="stylesheet.css" type="text/css"/><style>.border--3{border-width:3px!important}.bg-green{background-color:#8cca44!important}.icon-android-green svg{color:#8cca44}.bright-blue-color{color:#0082ff}.border--gray-less-faint{border-color:#e8ebee!important}.hmax130 img{max-height:130px}.wmax260{max-width:260px}.text-decoration-none{text-decoration:none!important}.unstyled-list li{list-style-type:none!important}.overflow-y{overflow-y:auto}.t48{top:48px}.b0{bottom:0}.limiter{padding-left:24px;padding-right:24px;width:100%}@media (min-width:1200px){.limiter{padding-left:12.5%!important;padding-right:12.5%!important}}@media (min-width:440px){.note-card{margin-top:-12px;width:240px;margin-left:24px;padding-bottom:24px}}@media (max-width:640px){.mobile-left-nav{visibility:collapse;width:0;padding:0}}@media (max-width:640px){.mobile-right-nav{visibility:hidden;width:0;padding:0}}@media (min-width:640px){.nav-mobile{visibility:hidden}}@media (max-width:640px){.mobile-right-nav svg{visibility:visible}}@media (max-width:800px){.content{width:100%!important}}code p{font-weight:lighter;font-size:11px}code,pre{font-family:Fira Mono Medium,Monaco,monospace!important;font-weight:700!important;font-size:13px!important;word-break:normal!important}pre{background-color:#232323!important}.prose h1,h2,h3,h4,h5,h6{font-weight:400!important}.prose h3{margin-top:32px;border-top:1px solid rgba(198,210,225,.50196)}.prose h3:first-child{border-top:0}body .prose blockquote{border-left:5px solid #56adec;background-color:#fafafa;border-radius:2px;word-wrap:break-word;padding-top:12px;padding-bottom:12px;padding-right:12px}.toc{display:block!important;-ms-flex-negative:0!important;flex-shrink:0!important;-ms-flex-preferred-size:auto!important;flex-basis:auto!important;list-style-type:none;color:#273d56;position:fixed;top:42px;bottom:0;overflow-y:auto;padding-right:20px;padding-bottom:20px;padding-top:24px}@media (max-width:800px){.toc{visibility:hidden}}.toc-subheaders{font-size:12px;display:inline-block;line-height:20px;margin-bottom:12px}.page-hover:hover,.toc-subheaders a:hover{color:#0082ff}.nav-item:hover{color:#0082ff!important;border-color:#273d56}.doc-ul>.doc-ul-item:before{content:"";width:8px;height:8px;border-radius:2px;border:1px solid #1f3349;opacity:.4;position:absolute;margin:9px 0 0 -20px}.doc-ol{counter-reset:listItem}.doc-ol>.doc-ol-item{margin:3px 0}ol li{list-style-type:none}ol li:before{counter-increment:listItem;content:counter(listItem);font-size:12px;border-radius:3px;padding:1px 6px;border:1px solid #c6d2e1;margin-right:12px}.hljs{color:#a9b7c6;background:#232323;display:block;overflow-x:auto;padding:.5em}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#56b881}.hljs-comment,.hljs-quote{color:gray}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#56b881}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><div id="react-mount"><div class="grid" data-reactroot="" data-reactid="1" data-react-checksum="835008012"><div class="z1 min48 flex-parent--center-main flex-parent w-full border-b border-t bg-white border--gray-less-faint fixed" data-reactid="2"><div class="wmax1200 w-full pl24 pr24 flex-parent--space-between-main flex-parent" data-reactid="3"><div class="flex-child col col--6 inline-block" data-reactid="4"><div class="txt-s mobile-left-nav py12 bg-transparent btn px0 color-gray-light" data-reactid="5"><strong data-reactid="6">Platform</strong></div><div class="txt-s py12 bg-transparent btn  color-gray-dark" data-reactid="7"><strong data-reactid="8">Android</strong></div><div class="txt-s mobile-left-nav py12 bg-transparent btn px0 color-gray-light" data-reactid="9"><strong data-reactid="10">Product</strong></div><div style="display:inline-block;" data-reactid="11"><button class="txt-s py12 nav-item bg-transparent btn flex-parent flex-parent--center-cross color-gray-dark" data-reactid="12"><strong data-reactid="13"><!-- react-text: 14 --><!-- /react-text --><!-- react-text: 15 --><!-- /react-text --><!-- react-text: 16 --><!-- /react-text --><!-- react-text: 17 -->Navigation<!-- /react-text --></strong><svg class="icon" data-reactid="18"><use href="#icon-chevron-down" data-reactid="19"></use></svg></button></div></div><div class="flex-child col col--6 flex-parent flex-parent--end-main" data-reactid="20"><div style="display:inherit;" data-reactid="21"><button class="block flex-parent flex-parent--center-cross" data-reactid="22"><svg class="icon--l nav-mobile color-gray-dark opacity75" data-reactid="23"><use href="#icon-menu" data-reactid="24"></use></svg></button></div><a class="py12 transition mobile-right-nav unround btn color-gray-dark nav-item bg-transparent txt-s  border-b border--3" href="/android-docs/navigation/overview/" data-reactid="25">Overview</a><!-- react-text: 26 --><!-- /react-text --><!-- react-text: 27 --><!-- /react-text --></div></div></div><div class="scroll-styled flex-parent--center-main flex-parent limiter pb96 pl24 pr24 pt24 overflow-y t48 b0 fixed flex-child" data-reactid="28"><div class="flex-parent--space-between-main flex-parent" data-reactid="29"><div class="col--3 pt42 col toc flex-child--no-shrink  scroll-styled" data-reactid="30"><div data-reactid="31"><li class="txt-bold txt-fancy" data-reactid="32"><a class="page-hover text-decoration-none" href="/android-docs/navigation/overview/" data-reactid="33"><div class="bright-blue-color" data-reactid="34">Navigation SDK</div></a></li><div class="ml6 pt6" data-reactid="35"><ul class="toc-subheaders">
<li>
<ul>
<li><a href="#install-the-navigation-sdk">Install the Navigation SDK</a></li>
<li><a href="#mapboxnavigation-object">MapboxNavigation object</a></li>
<li><a href="#locationengine">LocationEngine</a></li>
<li><a href="#lifecycle-methods">Lifecycle methods</a></li>
</ul>
</li>
</ul>
</div></div><div data-reactid="36"><li class="txt-bold txt-fancy" data-reactid="37"><a class="page-hover text-decoration-none" href="/android-docs/navigation/overview/navigation-events/" data-reactid="38">Navigation Events</a></li><!-- react-text: 39 --><!-- /react-text --></div><div data-reactid="40"><li class="txt-bold txt-fancy" data-reactid="41"><a class="page-hover text-decoration-none" href="/android-docs/navigation/overview/navigation-options/" data-reactid="42">Navigation Options</a></li><!-- react-text: 43 --><!-- /react-text --></div><div data-reactid="44"><li class="txt-bold txt-fancy" data-reactid="45"><a class="page-hover text-decoration-none" href="/android-docs/navigation/overview/route-progress/" data-reactid="46">Route Progress Object</a></li><!-- react-text: 47 --><!-- /react-text --></div><div data-reactid="48"><li class="txt-bold txt-fancy" data-reactid="49"><a class="page-hover text-decoration-none" href="/android-docs/api/navigation-sdk/0.2.0/index.html" data-reactid="50">API Reference</a></li><!-- react-text: 51 --><!-- /react-text --></div><!-- react-text: 52 --><!-- /react-text --></div><div data-reactid="53"><div class="prose color-gray-dark" data-reactid="54"><div class="content col--9 col col--offl3" data-reactid="55"><div class="bg-gray-faint clip mt12 wmax960 round-bold" data-reactid="56"><div class="bg-green py18 px24 color-white round-t-bold" data-reactid="57"><h2 class="txt-h2-mm txt-h3" data-reactid="58">Navigation SDK</h2><div class="txt-ms mt3" data-reactid="59"><span data-reactid="60">Current Version:</span><!-- react-text: 61 --> <!-- /react-text --><span class="txt-bold" data-reactid="62"><!-- react-text: 63 -->v<!-- /react-text --><!-- react-text: 64 -->0.2.0<!-- /react-text --></span><!-- react-text: 65 --> <!-- /react-text --><a class="link ml12 link--white opacity75 opacity100-on-hover txt-underline" href="https://github.com/mapbox/mapbox-navigation-android/blob/master/CHANGELOG.md" data-reactid="66">View changelog</a></div></div><div class="flex-parent" data-reactid="67"><div class="px24 flex-child py18" data-reactid="68"><div class="grid txt-ms" data-reactid="69"><div class="col mb3 mt0 col--6-mxl col--12 flex-parent--center-cross flex-parent icon-android-green inline-block" data-reactid="70"><svg class="icon" data-reactid="71"><use href="#icon-check" data-reactid="72"></use></svg><span class="color-dark pr6 pl6" data-reactid="73">Off-route detection</span><!-- react-text: 74 --><!-- /react-text --></div><div class="col mb3 mt0 col--6-mxl col--12 flex-parent--center-cross flex-parent icon-android-green inline-block" data-reactid="75"><svg class="icon" data-reactid="76"><use href="#icon-check" data-reactid="77"></use></svg><span class="color-dark pr6 pl6" data-reactid="78">Timed instructions</span><!-- react-text: 79 --><!-- /react-text --></div><div class="col mb3 mt0 col--6-mxl col--12 flex-parent--center-cross flex-parent icon-android-green inline-block" data-reactid="80"><svg class="icon" data-reactid="81"><use href="#icon-check" data-reactid="82"></use></svg><span class="color-dark pr6 pl6" data-reactid="83">Snap to route</span><!-- react-text: 84 --><!-- /react-text --></div><div class="col mb3 mt0 col--6-mxl col--12 flex-parent--center-cross flex-parent icon-android-green inline-block" data-reactid="85"><svg class="icon" data-reactid="86"><use href="#icon-check" data-reactid="87"></use></svg><span class="color-dark pr6 pl6" data-reactid="88">Route progress info</span><!-- react-text: 89 --><!-- /react-text --></div><div class="col mb3 mt0 col--6-mxl col--12 flex-parent--center-cross flex-parent icon-android-green inline-block" data-reactid="90"><svg class="icon" data-reactid="91"><use href="#icon-check" data-reactid="92"></use></svg><span class="color-dark pr6 pl6" data-reactid="93">Traffic routing</span><!-- react-text: 94 --><!-- /react-text --></div></div><div class="mt12 txt-ms" data-reactid="95"><a href="https://github.com/mapbox/mapbox-navigation-android" class="bright-blue-color text-decoration-none flex-parent-inline flex-parent--center-cross txt-bold" data-reactid="96"><svg class="icon mr12" data-reactid="97"><use href="#icon-github" data-reactid="98"></use></svg><!-- react-text: 99 -->Contribute on Github<!-- /react-text --><svg class="icon" data-reactid="100"><use href="#icon-chevron-right" data-reactid="101"></use></svg></a></div></div><div style="margin-top:-90px;margin-bottom:-60px;" class="pr36 pl12 relative w360 hmax360 flex-child block-mxl none clip flex-child--no-shrink" data-reactid="102"><div class="" data-reactid="103"><img class="pr36 pl12 flex-child block-mxl none clip flex-child--no-shrink absolute" src="../../assets/imgs/nav-sdk-splash.png" data-reactid="104"/></div></div></div></div><div class="pt12 doc-ul doc-ol pb96 wmax1200 doc-ol-item" data-reactid="105"><div class="markdown" data-reactid="106"><div data-reactid="107"><p>The Navigation SDK’s built on top of our Directions API and contains logic needed to get timed navigation instructions. The calculations use the user’s current location and compare it to the current route that the user’s traversing to provide critical information at any given moment.</p>
<h3 id="install-the-navigation-sdk"><a class="markdownIt-Anchor" href="#install-the-navigation-sdk"></a> Install the Navigation SDK</h3>
<p>Before starting to develop your application with the Navigation SDK, you’ll need to add the SDK as a dependency. Note that while we show how to insert the stable version of the SDK inside your project, you can also use the nightly build/snapshot or the beta version, if one is available. You can find the following dependency given below in the MavenCentral repository.</p>
<h4 id="add-the-dependency"><a class="markdownIt-Anchor" href="#add-the-dependency"></a> Add the dependency</h4>
<ol>
<li>Start Android Studio</li>
<li>Open up your application’s <code>build.gradle</code></li>
<li>Make sure that your project’s <code>minSdkVersion</code> is at API 15 or higher</li>
<li>Under dependencies, add a new build rule for the latest <code>mapbox-android-navigation</code></li>
<li>Click the Sync Project with Gradle Files near the toolbar in Studio.</li>
</ol>
<pre class="hljs"><code>repositories {
  mavenCentral()
}

dependencies {
  compile <span class="hljs-string">'com.mapbox.mapboxsdk:mapbox-android-navigation:0.2.0'</span>
}
</code></pre>
<h4 id="get-an-access-token"><a class="markdownIt-Anchor" href="#get-an-access-token"></a> Get an access token</h4>
<p>If you don’t have a Mapbox account, sign up for one <a href="https://www.mapbox.com/signup/">here</a>, then navigate to the <a href="https://www.mapbox.com/studio/account/tokens/">token page</a> in Mapbox Studio and copy your <strong>default public token</strong> to your clipboard. After you’ve added the Navigation SDK as a dependency inside your Android project, open the <code>string.xml</code> file, create a new string, and paste the access token. Then to pass this into the Navigation SDK.</p>
<pre class="hljs"><code><span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

    MapboxNavigation navigation = <span class="hljs-keyword">new</span> MapboxNavigation(<span class="hljs-keyword">this</span>, <span class="hljs-string">"&lt;access token&gt;"</span>);

    ...

  }
</code></pre>
<h4 id="setup-permissions"><a class="markdownIt-Anchor" href="#setup-permissions"></a> Setup permissions</h4>
<p>The Navigation SDK makes use of the Android manifest merge feature to reduce the need to include any Navigation SDK required things inside of your application’s manifest file. You’ll need to include <em>either</em> the Fine <strong>or</strong> Coarse location permission, for navigation to work properly. The user location permission should also be checked during runtime using the <a href="/mapbox-services/latest/telemetry/#permissionsmanager">PermissionManager</a>.</p>
<p>For best navigation results, it’s strongly recommended using the fine location permission which gives a more precise fix on the user’s current location.</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span>
</code></pre>
<h4 id="requesting-a-route"><a class="markdownIt-Anchor" href="#requesting-a-route"></a> Requesting a route</h4>
<p>Now that you have created a way for the <code>MapboxNavigation</code> object to get the user’s location, the other thing it will need is a route. Call <code>getRoute</code> passing in an origin, destination, and a callback to handle the response. If you’ve ever worked with <a href="http://square.github.io/retrofit/">Retrofit</a>, the callback here will look familiar since this is what we are using under the hood. Inside the onResponse, you can draw the directions route on a map or present time and distance using the full directions response.</p>
<pre class="hljs"><code><span class="hljs-comment">// From Mapbox to The White House</span>
Position origin = Position.fromLatLng(<span class="hljs-number">38.90992</span>, -<span class="hljs-number">77.03613</span>);
Position destination = Position.fromLatLng(<span class="hljs-number">38.8977</span>, -<span class="hljs-number">77.0365</span>);

navigation.getRoute(origin, destination, <span class="hljs-keyword">new</span> Callback&lt;DirectionsResponse&gt;() {
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(
    Call&lt;DirectionsResponse&gt; call, Response&lt;DirectionsResponse&gt; response)</span> </span>{

  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(Call&lt;DirectionsResponse&gt; call, Throwable t)</span> </span>{

  }
});
</code></pre>
<h3 id="mapboxnavigation-object"><a class="markdownIt-Anchor" href="#mapboxnavigation-object"></a> MapboxNavigation object</h3>
<p>You will find Most of the navigation APIs inside the <code>MapboxNavigation</code> class including fetching the route, starting and ending the navigation session, and attaching listeners for events that you’d like to handle. Assign and initialize a new instance of <code>MapboxNavigation</code> inside your navigation activity. When initializing, you’ll need to pass in a <code>Context</code> and your Mapbox access token. Read the access token section in this <a href="#access-tokens">getting started</a> document to learn how to get a free access token.</p>
<pre class="hljs"><code>MapboxNavigation navigation = <span class="hljs-keyword">new</span> MapboxNavigation(<span class="hljs-keyword">this</span>, MAPBOX_ACCESS_TOKEN);
</code></pre>
<h3 id="locationengine"><a class="markdownIt-Anchor" href="#locationengine"></a> LocationEngine</h3>
<p>Navigation requires the user’s location to run; this is done using the <code>LocationEngine</code> class introduced in Mapbox Services 2.0. Visit the <a href="/mapbox-services/2.0.1/telemetry/#locationengine"><code>LocationEngine</code></a> documentation for detailed instructions on how to use this class. You’ll need to set up an instance of a location engine and pass it into the <code>MapboxNavigation</code> object.</p>
<pre class="hljs"><code>LocationEngine locationEngine = LostLocationEngine.getLocationEngine(<span class="hljs-keyword">this</span>);
navigation.setLocationEngine(locationEngine);
</code></pre>
<h3 id="lifecycle-methods"><a class="markdownIt-Anchor" href="#lifecycle-methods"></a> Lifecycle methods</h3>
<p>Inside your application’s activity, you’ll want to override the onDestroy lifecycle method and remove any navigation listeners you are using and end the navigation session. Doing this prevents any memory leaks from occurring but still allows navigation to run in the background if your user goes to their home screen for example.</p>
<pre class="hljs"><code><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">super</span>.onDestroy();
  <span class="hljs-comment">// Remove all navigation listeners being used</span>
  navigation.removeAlertLevelChangeListener(<span class="hljs-keyword">this</span>);
  navigation.removeNavigationEventListener(<span class="hljs-keyword">this</span>);
  navigation.removeProgressChangeListener(<span class="hljs-keyword">this</span>);
  navigation.removeOffRouteListener(<span class="hljs-keyword">this</span>);

  <span class="hljs-comment">// End the navigation session</span>
  navigation.endNavigation();
}
</code></pre>
</div></div></div></div></div></div></div></div></div></div><script src="/android-docs/bundle.js?t=1496264501581"></script></body></html>